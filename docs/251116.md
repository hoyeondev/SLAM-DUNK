
# 웹 단계별 주문 시나리오

<img width="2609" height="806" alt="image" src="https://github.com/user-attachments/assets/94348ff2-c719-416f-8b33-95ff00d63f8b" />

```
flowchart LR
    %% 1단계
    Start1([사용자: 주문 시작]) --> OrderInput[웹 UI: 주문 정보 입력<br/>객실 번호, 품목, 결제 여부]
    
    OrderInput --> DBSave[(Database 저장<br/>상태: ORDERED)]
    
    DBSave --> WSNotify[WebSocket 전송<br/>관리자에게 실시간 알림]
    WSNotify --> AdminDashboard[관리자 대시보드<br/>새 주문 표시]
    
    style Start1 fill:#e3f2fd
    style DBSave fill:#fff3e0
    style WSNotify fill:#fce4ec

    %% 2단계
    Start2([관리자 대시보드]) --> AdminCheck[관리자: 주문 확인]
    AdminCheck --> PrepareBtn[관리자: '준비완료' 버튼 클릭]
    
    PrepareBtn --> UpdateAPI[WebSocket 메시지 전송]
    UpdateAPI --> DBUpdate[(Database 업데이트<br/>상태: PREPARED)]
    
    DBUpdate --> LoadRobot[로봇에 물품 적재]

    style Start2 fill:#e3f2fd
    style DBUpdate fill:#fff3e0

    Start2([관리자 대시보드]) --> DeliveryBtn[관리자: '배달 시작' 버튼 클릭]
    
    DeliveryBtn --> DeliveryAPI[WebSocket 메시지 전송<br/>/app/assign-robot]
    DeliveryAPI --> DBUpdate2[(Database 업데이트<br/>상태: DELIVERING)]
    
    DBUpdate2 --> Rosbridge[rosbridge<br/>ROS2 Action 발행<br/>/room_command]
    Rosbridge --> RobotSignal[로봇에 배달 명령 전달<br/>목적지: 객실 번호]
    


    style DBUpdate2 fill:#fff3e0
    style Rosbridge fill:#f3e5f5
```
