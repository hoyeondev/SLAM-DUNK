

### 시퀀스 다이어그램 플로우


#### ✅ 이미지
<img width="1757" height="1580" alt="flow" src="https://github.com/user-attachments/assets/e13bce5a-ea36-49bc-89a9-542d46d12afb" />


#### ✅ 코드 : [링크](https://www.planttext.com/)
```
@startuml
title [SLAM DUNK] 시퀀스 다이어그램

actor Customer as C
participant "Web(고객 UI)" as W
participant "Spring Server (WebSocket + API)" as S
participant "Web(관리자 UI)" as M
participant "ROS2 Bridge\n(rosbridge_websocket)" as B
participant "로봇 (Scout Mini + Nav2)" as R
participant "라즈베리파이 Pico\n(RFID + LED + Piezo)" as P
database "DB (H2)" as D

== 1. 고객 주문 ==
C -> W: 상품 선택 + 객실번호 입력 후 주문
W -> S: POST /order\n{itemName, roomNumber, quantity, price}
S -> D: 주문 데이터 저장 (status="ORDERED")
S --> W: 주문 접수 완료 (orderNumber)

== 2. 관리자 주문 확인 ==
S -> M: WebSocket 알림 "새 주문 접수"
M -> S: 주문 확인 및 로봇 배달 요청
S -> B: publish /assign_order\n{orderNumber, roomNumber}
B -> R: ROS2 토픽 전달 (assign_order)

== 3. 로봇 자율주행 ==
R -> R: Nav2 기반 SLAM 주행 (객실 위치로 이동)
R -> S: publish /delivery/status\n{orderNumber, status="DELIVERING"}
S -> W: 상태 갱신 (배달중)

== 4. 객실 도착 및 알림 ==
R -> B: publish /arrived\n{orderNumber, roomNumber}
B -> S: 전달 (도착 신호)
S -> P: ROS 메시지 송신 (도착 알림)
P -> P: LED 점등 + Piezo 알림음 출력

== 5. 고객 인증 ==
C -> P: RFID 카드 태깅
P -> S: publish /rfid/verify\n{orderNumber, cardId}
S --> P: 인증 성공 응답 (status="VERIFIED")
P -> P: 인증 성공 알림 (LED 변경 + 알림음)

== 6. 상품 수령 및 센서 감지 ==
C -> R: 상품 수령
R -> R: 초음파센서로 적재함 상태 감지
R -> B: publish /delivery/status\n{orderNumber, status="TAKEN"}
B -> S: 전달

== 7. 배달 완료 및 복귀 ==
S -> R: publish /return_home\n{orderNumber}
R -> R: Nav2 복귀 주행
R -> B: publish /delivery/status\n{orderNumber, status="COMPLETED"}
B -> S: 전달
S -> D: 상태 갱신 (status="COMPLETED")
S -> W: WebSocket 갱신 (배달 완료 표시)
W --> C: "배달 완료" 표시

@enduml
```
